{% extends "base.html" %}
{% block title %}All Predictions{% endblock %}
{% block page_title %}All Users' Predictions{% endblock %}

{% block content %}
<form method="get" class="row g-3 mb-4">
  <div class="col-md-3">
    <input type="text" name="username" class="form-control" placeholder="Username" value="{{ username }}">
  </div>
  <div class="col-md-3">
    <input type="text" name="result" class="form-control" placeholder="Result" value="{{ result }}">
  </div>
  <div class="col-md-2">
    <input type="date" name="start_date" class="form-control" value="{{ start_date }}">
  </div>
  <div class="col-md-2">
    <input type="date" name="end_date" class="form-control" value="{{ end_date }}">
  </div>
  <div class="col-md-2">
    <button type="submit" class="btn btn-primary w-100">Filter</button>
  </div>
</form>

<!-- FIXED: Changed from JavaScript button to simple anchor tag -->
<a href="{{ url_for('admin_bp.predictions') }}" class="btn btn-secondary mb-3">
    Clear Filter
</a>

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>ID</th>
      <th>User</th>
      <th>salon_name</th>
      <th>Image</th>
      <th>Result</th>
      <th>Confidence</th>
      <th>Timestamp</th>
    </tr>
  </thead>
  <tbody>
    {% for pred in preds %}
    <tr>
      <td>{{ pred.id }}</td>
      <td>{{ pred.username or 'Unknown' }}</td>
      <td>{{ pred.salon_name  }}</td>
      <td>{{ pred.image_name }}</td>
      <td>{{ pred.result }}</td>
      <td>{{ "%.2f"|format(pred.confidence * 100) }}%</td>
      <td>{{ pred.timestamp }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}